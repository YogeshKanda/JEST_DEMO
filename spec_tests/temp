var file = require('fs'),
request = require('superagent'),
config = require('config');
// request = superTest(global.ENV);

const options = {
    hostname: 'internetpu',
    port: 8085,
    path: "https://www.metaweather.com/api/location/search/?query=san",
    method: 'GET'
  }; 

// extend with Request#proxy()
require('superagent-proxy')(request);
 
// HTTP, HTTPS, or SOCKS proxy to use
var proxy = process.env.http_proxy || 'http://internetpu:8085';
 
describe('JEST Demo', ()=>{
    // console.log(config.get(process.env.http_proxy));
    test('It should get 200 status code', (done) =>{

        request.get(options)
        // .proxy(proxy)
        // .set("x-api-key", "04cf3299-801e-4eac-b899-31c16488f94e")
        .end( (err, res) =>{
            if(err) done.fail(err);
            expect(res.status).toBe(200);
            done();
        });
    });
});